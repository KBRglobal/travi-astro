---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getLangFromUrl, useTranslations, type Language } from '../lib/i18n';

// Try to detect language from URL, fallback to 'en'
const lang = getLangFromUrl(Astro.url) || 'en';
const t = useTranslations(lang);

// Get 404 content with fallbacks
const title = t('errors.404.title') || 'Page Not Found';
const message = t('errors.404.message') || "The page you're looking for doesn't exist.";
const buttonText = t('errors.404.button') || 'Go Home';
const metaDescription = `404 - ${title}. ${message}`;
---

<BaseLayout
  title={title}
  description={metaDescription}
  lang={lang as Language}
>
  <div class="container flex items-center justify-center min-h-[calc(100vh-16rem)] py-20">
    <div class="text-center max-w-2xl mx-auto">
      <!-- 404 Number -->
      <div class="mb-8">
        <h1 class="text-9xl font-bold text-primary/20 select-none" aria-hidden="true">
          404
        </h1>
      </div>

      <!-- Error Badge -->
      <div class="mb-6">
        <span class="inline-block rounded-full bg-destructive/10 px-4 py-1 text-sm font-medium text-destructive">
          {title}
        </span>
      </div>

      <!-- Error Message -->
      <h2 class="text-3xl font-bold mb-4">
        {title}
      </h2>
      <p class="text-lg text-muted-foreground mb-8">
        {message}
      </p>

      <!-- CTA Button -->
      <a
        href={`/${lang}`}
        class="inline-flex items-center justify-center rounded-md bg-primary px-8 py-3 text-sm font-medium text-primary-foreground shadow transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"
      >
        {buttonText}
      </a>

      <!-- Helpful Links -->
      <div class="mt-12 pt-8 border-t">
        <p class="text-sm text-muted-foreground mb-4">
          {t('common.loading') ? 'You might want to visit:' : 'You might want to visit:'}
        </p>
        <div class="flex flex-wrap gap-4 justify-center">
          <a
            href={`/${lang}`}
            class="text-sm font-medium text-primary hover:underline"
          >
            {t('nav.home') || 'Home'}
          </a>
          <a
            href={`/${lang}/attractions`}
            class="text-sm font-medium text-primary hover:underline"
          >
            {t('nav.attractions') || 'Attractions'}
          </a>
          <a
            href={`/${lang}/about`}
            class="text-sm font-medium text-primary hover:underline"
          >
            {t('nav.about') || 'About'}
          </a>
          <a
            href={`/${lang}/contact`}
            class="text-sm font-medium text-primary hover:underline"
          >
            {t('nav.contact') || 'Contact'}
          </a>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>
